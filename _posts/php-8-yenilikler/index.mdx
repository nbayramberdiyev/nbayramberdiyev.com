---
title: PHP 8 Yenilikler
date: 2020-12-06
tags: [php]
excerpt: PHP 8 ile gelen yeni Ã¶zellikler
draft: false
---

![](./poster.jpg)

PHP, tÃ¼m eleÅŸtirilere raÄŸmen Ã¶zellikle son yÄ±llarda aktif olarak geliÅŸtirilmekte ve geliÅŸtirildikÃ§e de daha hÄ±zlÄ±, daha stabil, daha gÃ¼Ã§lÃ¼ bir dil hÃ¢line gelmektedir. Son olarak, <a href="https://www.php.net/releases/8.0/en.php" target="_blank" rel="nofollow noopener noreferrer">PHP 8 duyuruldu</a> ve hem dilin Ã§ekirdeÄŸinde Ã¶nemli dÃ¼zeltmelerin, iyileÅŸtirmelerin yapÄ±ldÄ±ÄŸÄ±nÄ± hem de kullanÄ±ÅŸlÄ± yeni Ã¶zelliklerin getirildiÄŸini gÃ¶rebiliriz.

-   [JIT Compiler](#jit-compiler)
-   [Union Types](#union-types)
-   [Nullsafe OperatÃ¶rÃ¼](#nullsafe-operatÃ¶rÃ¼)
-   [Named Arguments](#named-arguments)
-   [Attributes](#attributes)
-   [Constructor Property Promotion](#constructor-property-promotion)
-   [Match Expression](#match-expression)
-   [Yeni Return Tipi: `static`](#yeni-return-tipi-static)
-   [Yeni Tip: `mixed`](#yeni-tip-mixed)
-   [Objeler Ãœzerinde `::class` KullanÄ±mÄ±](#objeler-Ã¼zerinde-class-kullanÄ±mÄ±)
-   [Expression Ä°Ã§inde throw KullanÄ±mÄ±](#expression-iÌ‡Ã§inde-throw-kullanÄ±mÄ±)
-   [Catch Ä°fadesinde Ä°steÄŸe BaÄŸlÄ± Hata DeÄŸiÅŸkeni](#catch-iÌ‡fadesinde-iÌ‡steÄŸe-baÄŸlÄ±-hata-deÄŸiÅŸkeni)
-   [Son Parametreden Sonra VirgÃ¼l KullanÄ±mÄ±](#son-parametreden-sonra-virgÃ¼l-kullanÄ±mÄ±)
-   [Yeni SÄ±nÄ±f: `WeakMap`](#yeni-sÄ±nÄ±f-weakmap)
-   [Yeni SÄ±nÄ±f: `PhpToken` (`token_get_all()` Alternatifi)](#yeni-sÄ±nÄ±f-phptoken-token_get_all-alternatifi)
-   [Yeni Interface: `Stringable`](#yeni-interface-stringable)
-   [Yeni Fonksiyon: `str_contains`](#yeni-fonksiyon-str_contains)
-   [Yeni Fonksiyonlar: `str_starts_with`, `str_ends_with`](#yeni-fonksiyonlar-str_starts_with-str_ends_with)
-   [Yeni Fonksiyon: `fdiv`](#yeni-fonksiyon-fdiv)
-   [Yeni Fonksiyon: `get_debug_type`](#yeni-fonksiyon-get_debug_type)
-   [Yeni Fonksiyon: `preg_last_error_msg`](#yeni-fonksiyon-preg_last_error_msg)
-   [Yeni Fonksiyon: `get_resource_id`](#yeni-fonksiyon-get_resource_id)
-   [Fonksiyon Parametrelerindeki Tip HatasÄ± GeliÅŸtirmeleri](#fonksiyon-parametrelerindeki-tip-hatasÄ±-geliÅŸtirmeleri)
-   [SayÄ± ve String KarÅŸÄ±laÅŸtÄ±rma GeliÅŸtirmeleri](#sayÄ±-ve-string-karÅŸÄ±laÅŸtÄ±rma-geliÅŸtirmeleri)
-   [Private Metodlarda Inheritance KurallarÄ±](#private-metodlarda-inheritance-kurallarÄ±)
-   [`substr`, `iconv_substr`, `grapheme_substr` FonksiyonlarÄ±nÄ±n DÃ¶nÃ¼ÅŸ DeÄŸerleri](#substr-iconv_substr-grapheme_substr-fonksiyonlarÄ±nÄ±n-dÃ¶nÃ¼ÅŸ-deÄŸerleri)

## JIT Compiler

PHP 8â€™in belki de en dikkat Ã§ekici ve heyecanlandÄ±rÄ±cÄ± yeniliÄŸi olan JIT (just in time) compiler, uygulamalarÄ±mÄ±zÄ±n performansÄ±nÄ± Ã¶nemli Ã¶lÃ§Ã¼de arttÄ±rmak amacÄ±yla PHPâ€™ye dÃ¢hil edilmiÅŸtir. Daha Ã¶nce 3 kez bununla ilgili giriÅŸimler ve Ã§alÄ±ÅŸmalar olmuÅŸ ama Ã§eÅŸitli nedenlerden dolayÄ± bir tÃ¼rlÃ¼ PHPâ€™ye uygulanamamÄ±ÅŸtÄ±. Nihayet PHP 8 iÃ§in kollarÄ± sÄ±vayan <a href="https://twitter.com/dstogov" target="_blank" rel="nofollow noopener noreferrer">Dmitry Stogov</a>â€™un Ã§alÄ±ÅŸmalarÄ± sonucunda JIT compiler isteÄŸe baÄŸlÄ± bir Ã¶zellik olarak PHPâ€™ye dÃ¢hil edildi.

JIT compilerâ€™Ä±n ne olduÄŸundan kÄ±saca bahsetmek gerekirse, bildiÄŸiniz gibi PHP Ã§alÄ±ÅŸma sÄ±rasÄ±nda (runtime) yorumlanan (interpreted) bir dildir. C, Go, Java gibi derlenen (compiled) bir dil deÄŸildir. JIT, kodun sÄ±klÄ±kla tekrarlanarak Ã§alÄ±ÅŸan parÃ§alarÄ±nÄ± (hot code) runtime sÄ±rasÄ±nda makine koduna derler. Ve her defasÄ±nda tekrar interprete etmek yerine o derlenmiÅŸ kod kullanÄ±lÄ±r. Bu da interprete iÅŸlemini azalttÄ±ÄŸÄ± iÃ§in uygulamada performans artÄ±ÅŸÄ± saÄŸlamaktadÄ±r. Bir nevi Ã¶nbellekleme gibi dÃ¼ÅŸÃ¼nebiliriz.

JIT compilerâ€™Ä± etkinleÅŸtirmek iÃ§in Ã¶ncelikle OPcache eklentisinin aktif olmasÄ± gerekmektedir. Bunun iÃ§in `php.ini` dosyasÄ±nda `opcache.enable=1` olarak ayarlamamÄ±z ve daha sonra `opcache.jit_buffer_size=1024M` ÅŸeklinde bellek ayÄ±rmamÄ±z gerekmektedir. Bunun varsayÄ±lan deÄŸeri 0, yani JIT compiler devre dÄ±ÅŸÄ± olarak gelmektedir. Etkin olup olmadÄ±ÄŸÄ±ndan emin olamÄ±yorsanÄ±z <a href="https://www.php.net/manual/en/function.opcache-get-status.php" target="_blank" rel="nofollow noopener noreferrer">`opcache_get_status`</a> fonksiyonunu kullanarak kontrol edebilirsiniz.

<Collapsable title="RFC" titleSize="1rem">
    <a
        href="https://wiki.php.net/rfc/jit"
        target="_blank"
        rel="nofollow noopener noreferrer"
    >
        JIT
    </a>
</Collapsable>

## Union Types

PHP'de eskiden Ã§oklu tip belirtmeyi sadece 2 Ã¶zel yÃ¶ntemle yapabiliyorduk:

-   `?TÄ°P`: `null` veya belirtilen tip
-   `iterable`: <a href="https://www.php.net/manual/en/language.types.array.php" target="_blank" rel="nofollow noopener noreferrer">`array`</a> veya <a href="https://www.php.net/manual/en/class.traversable.php" target="_blank" rel="nofollow noopener noreferrer">`Traversable`</a>

Veya bunu yapmak iÃ§in phpdoc annotation kullanÄ±yorduk:

```php
// PHP 7 ve Ã¶ncesi ğŸ‘

class Product
{
    /**
     * @var int|float $price
     */
	protected $price;

    /**
     * @param int|float $price
     */
	public function setPrice($price): void
	{
		$this->price = $price;
	}

    /**
     * @return int|float
     */
	public function getPrice()
	{
		return $this->price;
	}
}
```

PHP 8 ile beraber metodlarda ve fonksiyonlarda birden fazla dÃ¶nÃ¼ÅŸ tipi veya parametre tipi, sÄ±nÄ±flarda ise birden fazla property tipi tanÄ±mlayabileceÄŸiz artÄ±k:

```php
// PHP 8 ve sonrasÄ± ğŸ‘

class Product
{
	protected int|float $price; // highlight-line

	public function setPrice(int|float $price): void // highlight-line
	{
		$this->price = $price;
	}

	public function getPrice(): int|float // highlight-line
	{
		return $this->price;
	}
}
```

`void` tipi hiÃ§bir deÄŸer dÃ¶ndÃ¼rmeyen metodlarda/fonksiyonlarda kullanÄ±ldÄ±ÄŸÄ± iÃ§in buna dÃ¢hil deÄŸil ve tek baÅŸÄ±na kullanÄ±lmaya devam edecektir.

Buna ek olarak, `bool` tipi ile beraber `false` deÄŸerini de Ã§oklu tip belirtmede kullanabileceÄŸiz. Peki `bool` tipi varken neden `false` ile belirtelim ki?! Ã‡Ã¼nkÃ¼ bazÄ± PHP fonksiyonlarÄ± alternatif olarak `false` deÄŸerini dÃ¶ndÃ¼rmektedir. Ã–rneÄŸin, <a href="https://www.php.net/manual/en/function.strpos.php" target="_blank" rel="nofollow noopener noreferrer">`strpos`</a> fonksiyonu `int|false` veya <a href="https://www.php.net/manual/en/function.substr.php" target="_blank" rel="nofollow noopener noreferrer">`substr`</a> fonksiyonu `string|false` deÄŸerlerini dÃ¶ndÃ¼rmektedir.

<Collapsable title="RFC" titleSize="1rem">
    <a
        href="https://wiki.php.net/rfc/union_types_v2"
        target="_blank"
        rel="nofollow noopener noreferrer"
    >
        Union Types 2.0
    </a>
</Collapsable>

## Nullsafe OperatÃ¶rÃ¼

DeÄŸeri `null` olan veya tanÄ±mlanmamÄ±ÅŸ property'yi/deÄŸiÅŸkeni <a href="https://www.php.net/manual/en/function.isset.php" target="_blank" rel="nofollow noopener noreferrer">`isset`</a> fonksiyonu veya `??` operatÃ¶rÃ¼ ile kontrol ediyorduk. Bu durum bazen iÃ§ iÃ§e `if` kullanmamÄ±za neden olmaktadÄ±r ki kodumuzu Ã§irkinleÅŸtirerek okunurluÄŸunu dÃ¼ÅŸÃ¼rmektedir. Ã–rneÄŸin, aÅŸaÄŸÄ±daki kodu inceleyelim:

```php
// PHP 7 ve Ã¶ncesi ğŸ‘

if (isset($session)) {
    $user = $session->user;

    if ($user !== null) {
        $address = $user->getAddress();

        if ($address !== null) {
            $country = $address->getCountry();

            // ...
        }
    }
}
```

PHP 8 ile beraber bu kodu ÅŸu ÅŸekilde gÃ¼zelleÅŸtirebiliriz:

```php
// PHP 8 ve sonrasÄ± ğŸ‘

$country = $session?->user?->getAddress()?->getCountry();

// ...
```

<Collapsable title="RFC" titleSize="1rem">
    <a
        href="https://wiki.php.net/rfc/nullsafe_operator"
        target="_blank"
        rel="nofollow noopener noreferrer"
    >
        Nullsafe operator
    </a>
</Collapsable>

## Named Arguments

PHP 8'de fonksiyonlarÄ± veya metodlarÄ± kullanÄ±rken parametreleri _sÄ±rasÄ±na_ gÃ¶re deÄŸil de _ismine_ gÃ¶re gÃ¶nderebiliriz. Ã–zellikle de fazla parametre alan fonksiyonlarÄ± kullanÄ±rken parametre sÄ±rasÄ±nÄ± dikkate almamÄ±za gerek kalmayacak ve isteÄŸe baÄŸlÄ± olan parametreleri atlayabilmemizi saÄŸlayacaktÄ±r.

Ã–rnek olarak <a href="https://www.php.net/manual/en/function.setcookie.php" target="_blank" rel="nofollow noopener noreferrer">`setcookie`</a> fonksiyonunu dÃ¼ÅŸÃ¼nebiliriz. Bu fonksiyon, biri zorunlu olmak Ã¼zere toplam 7 parametre almaktadÄ±r. Son sÄ±radaki parametreyi (`httponly`) Ã¶zelleÅŸtirmek istediÄŸimizde ondan Ã¶ncekileri de belirtmek zorundayÄ±z:

```php
// PHP 7 ve Ã¶ncesi ğŸ‘

setcookie('test', '123', 0, '', '', false, true);

```

PHP 8 itibarÄ±yla bu ve benzeri durumlarda parametreleri istediÄŸimiz sÄ±rada gÃ¶nderebiliriz:

```php
// PHP 8 ve sonrasÄ± ğŸ‘

setcookie(name: 'test', value: '123', httponly: true);

// veya

setcookie(httponly: true, name: 'test', value: '123');

// veya (hem sÄ±raya hem isme gÃ¶re)

setcookie('test', '123', httponly: true);
```

GÃ¶rdÃ¼ÄŸÃ¼nÃ¼z gibi burada isteÄŸe baÄŸlÄ± olan 4 parametreyi (`expires`, `path`, `domain`, `secure`) atlamÄ±ÅŸ olduk. AyrÄ±ca, hangi parametreyi gÃ¶nderdiÄŸimizi ismiyle belirttiÄŸimiz iÃ§in daha sonra kodumuzu okuduÄŸumuzda tekrar tekrar dokÃ¼mantasyona bakmamÄ±za gerek kalmayacak.

<Collapsable title="RFC" titleSize="1rem">
    <a
        href="https://wiki.php.net/rfc/named_params"
        target="_blank"
        rel="nofollow noopener noreferrer"
    >
        Named Arguments
    </a>
</Collapsable>

## Attributes

JavaScript ve Python'da Decorators, Java'da Annotations olarak bilinen bu Ã¶zellik PHP'ye sonunda _Attributes_ olarak geldi. Daha Ã¶nceki sÃ¼rÃ¼mlerde birkaÃ§ kez Ã¶nerilmiÅŸ ancak yeterli oy alamamasÄ± nedeniyle vazgeÃ§ilmiÅŸti.

Attributes, kÄ±saca sÄ±nÄ±flara, metodlara, property'lere, deÄŸiÅŸkenlere veya fonksiyonlara metadata eklememize yardÄ±mcÄ± olmaktadÄ±r. Eskiden bu iÅŸlemi docblock kullanarak yapÄ±yorduk.

PHP'de dockblock'larÄ± annotation olarak hiÃ§ kullanmadÄ±m ama Symfony framework'Ã¼nÃ¼n routing sisteminden Ã¶rnek vermek istiyorum. Symfony'de routing controller iÃ§inde metodlara docblock eklenerek tanÄ±mlanabilmektedir:

```php:title=src/Controller/PostController.php
// PHP 7 ve Ã¶ncesi ğŸ‘

namespace App\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\AbstractController;
use Symfony\Component\HttpFoundation\Response;
use Symfony\Component\Routing\Annotation\Route;

class PostController extends AbstractController
{
    // ...

    /**
     * @Route("/posts/{slug}", name="posts_show")
     */
    public function show(string $slug): Response
    {
        // ...
    }

    // ...
}
```

ArtÄ±k dockblock ekleyerek bunu manuel parse etmek yerine PHP Attributes ile tanÄ±ÅŸalÄ±m:

```php:title=src/Controller/PostController.php
// PHP 8 ve sonrasÄ± ğŸ‘

namespace App\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\AbstractController;
use Symfony\Component\HttpFoundation\Response;
use Symfony\Component\Routing\Annotation\Route;

class PostController extends AbstractController
{
    // ...

    #[Route('/posts/{slug}', name: 'posts_show')]
    public function show(string $slug): Response
    {
        // ...
    }

    // ...
}
```

<Collapsable title="RFC" titleSize="1rem">
    <a
        href="https://wiki.php.net/rfc/attributes_v2"
        target="_blank"
        rel="nofollow noopener noreferrer"
    >
        Attributes v2
    </a>
</Collapsable>

## Constructor Property Promotion

Bir sÄ±nÄ±f iÃ§inde property'leri tanÄ±mladÄ±ktan sonra constructor'da gelen parametrelerin deÄŸerlerini o property'lere ÅŸu ÅŸekilde atayabiliyorduk:

```php
// PHP 7 ve Ã¶ncesi ğŸ‘

class User
{
    protected string $firstName;
    protected string $lastName;
    protected string $email;

    public function __construct(string $firstName, string $lastName, string $email)
    {
        $this->firstName = $firstName;
        $this->lastName = $lastName;
        $this->email = $email;
    }
}
```

<a
    href="https://docs.hhvm.com/hack/classes/constructors#constructor-parameter-promotion"
    target="_blank"
    rel="nofollow noopener noreferrer"
>
    Hack
</a> dilinden esinlenilerek geliÅŸtirilmiÅŸ olan bu Ã¶zellik sayesinde aynÄ± iÅŸlemi daha kÄ±sa ve temiz ÅŸekilde yazabiliriz:

```php
// PHP 8 ve sonrasÄ± ğŸ‘

class User
{
    public function __construct(
        protected string $firstName,
        protected string $lastName,
        protected string $email,
    ) {}
}
```

<Collapsable title="RFC" titleSize="1rem">
    <a
        href="https://wiki.php.net/rfc/constructor_promotion"
        target="_blank"
        rel="nofollow noopener noreferrer"
    >
        Constructor Property Promotion
    </a>
</Collapsable>

## Match Expression

Klasik <a href="https://www.php.net/manual/en/control-structures.switch.php" target="_blank" rel="nofollow noopener noreferrer">`switch`</a> ifadesinin daha geliÅŸmiÅŸ bir versiyonu olarak dÃ¼ÅŸÃ¼nebiliriz.

AralarÄ±ndaki farklar ise kÄ±saca ÅŸu ÅŸekilde:

-   `macth` ifadesinde `break` yok. ğŸ˜‹
-   `match` strict (===) karÅŸÄ±laÅŸtÄ±rma yaparken, `switch` loose (==) karÅŸÄ±laÅŸtÄ±rma yapar. ğŸ˜
-   `match` eÅŸleÅŸen deÄŸeri dÃ¶ndÃ¼rÃ¼r, `switch` ile her case iÃ§in deÄŸiÅŸken atamayÄ± manuel yaparÄ±z. ğŸ¤©
-   `match` ifadesine eÅŸleÅŸmeyen deÄŸer geldiÄŸinde Ã¶lÃ¼mcÃ¼l hatalardan <a href="https://www.php.net/manual/en/class.unhandledmatcherror.php" target="_blank" rel="nofollow noopener noreferrer">`UnhandledMatchError`</a> fÄ±rlatÄ±lÄ±r, `switch` ile bunu `default` iÃ§inde yapabiliyoruz. ğŸ¤¤

`match` ifadesinin Ã¼stÃ¼nlÃ¼ÄŸÃ¼nÃ¼ ve faydalarÄ±nÄ± bariz bir ÅŸekilde gÃ¶rebiliriz. Bug ve hatalardan kaÃ§Ä±nmamÄ±za inanÄ±lmaz yardÄ±mcÄ± olacaÄŸÄ±nÄ± dÃ¼ÅŸÃ¼nÃ¼yorum.

```php
// PHP 7 ve Ã¶ncesi ğŸ‘

$abbreviation = 'PHP';
$meaning = '';

switch ($abbreviation) {
    case 'HTML':
        $meaning = 'Hyper Text Markup Language';
        break;
    case 'CSS':
        $meaning = 'Cascading Style Sheets';
        break;
    case 'PHP':
        $meaning = 'PHP: Hypertext Preprocessor';
        break;
}

var_dump($meaning); // PHP: Hypertext Preprocessor
```

Bunu `match` expression ile Ã§ok daha gÃ¼zel ÅŸekilde yazabiliriz:

```php
// PHP 8 ve sonrasÄ± ğŸ‘

$abbreviation = 'PHP';

$meaning = match ($abbreviation) {
    'HTML' => 'Hyper Text Markup Language',
    'CSS'  => 'Cascading Style Sheets',
    'PHP'  => 'PHP: Hypertext Preprocessor',
};

var_dump($meaning); // PHP: Hypertext Preprocessor
```

<Collapsable title="RFC" titleSize="1rem">
    <a
        href="https://wiki.php.net/rfc/match_expression_v2"
        target="_blank"
        rel="nofollow noopener noreferrer"
    >
        Match expression v2
    </a>
</Collapsable>

## Yeni Return Tipi: `static`

Ã–nceleri return tipi olarak `parent` ve `self` kullanabiliyorduk. PHP 8 ile beraber `static` tipini de return tipi olarak kullanabileceÄŸiz.

```php
class App
{
    public function create(): static
    {
        return new static;

        // veya

        return $this;
    }
}
```

<Info>

`static` bazÄ± Ã§eliÅŸkilere neden olacaÄŸÄ± iÃ§in parametre veya property tipi olarak kullanÄ±lamamaktadÄ±r, ÅŸimdilik sadece return tipi olarak kullanÄ±labilmektedir.

</Info>

<Collapsable title="RFC" titleSize="1rem">
    <a
        href="https://wiki.php.net/rfc/static_return_type"
        target="_blank"
        rel="nofollow noopener noreferrer"
    >
        Static return type
    </a>
</Collapsable>

## Yeni Tip: `mixed`

AdÄ±ndan da anlaÅŸÄ±lacaÄŸÄ± gibi _herhangi bir tip_ demektir. Yani, `mixed` tipi aÅŸaÄŸÄ±dakilerden herhangi birisi olabilir:

-   `bool`
-   `int`
-   `double`
-   `string`
-   `array`
-   `object`
-   `resource`
-   `callable`
-   `null`

`mixed` tipini kullanmak pek tavsiye edilmese de bazÄ± durumlarda iÅŸimize yarayabilir. Buna belki de en iyi Ã¶rnek <a href="https://www.php.net/manual/en/function.var-dump.php" target="_blank" rel="nofollow noopener noreferrer">`var_dump`</a>, <a href="https://www.php.net/manual/en/function.print-r.php" target="_blank" rel="nofollow noopener noreferrer">`print_r`</a>, <a href="https://www.php.net/manual/en/function.empty.php" target="_blank" rel="nofollow noopener noreferrer">`empty`</a> veya <a href="https://www.php.net/manual/en/function.gettype.php" target="_blank" rel="nofollow noopener noreferrer">`gettype`</a> fonksiyonlarÄ± olabilir. Sadece parametre tipi olarak deÄŸil, property veya return tipi olarak da kullanÄ±labilir.

<a
    href="https://github.com/symfony/var-dumper"
    target="_blank"
    rel="nofollow noopener noreferrer"
>
    Symfony var-dumper
</a> gibi bir fonksiyon yazmak istediÄŸimizi dÃ¼ÅŸÃ¼nelim. En sade haliyle ÅŸu ÅŸekilde olabilir:

```php
// PHP Union Types ğŸ‘

function dd(bool|int|float|string|array|object|null $var): void // highlight-line
{
    var_dump($var);
    exit();
}
```

`mixed` tipine Ã§evirelim:

```php
// PHP `mixed` Type ğŸ‘

function dd(mixed $var): void // highlight-line
{
    var_dump($var);
    exit();
}
```

<Collapsable title="RFC" titleSize="1rem">
    <a
        href="https://wiki.php.net/rfc/mixed_type_v2"
        target="_blank"
        rel="nofollow noopener noreferrer"
    >
        Mixed Type v2
    </a>
</Collapsable>

## Objeler Ãœzerinde `::class` KullanÄ±mÄ±

Eskiden `User::class` gibi bir sÄ±nÄ±fÄ±n tam ismini (namespace ile beraber) string olarak alabiliyorduk. Ama `$user::class` gibi deÄŸiÅŸken objesinden alamÄ±yorduk. Bunun iÃ§in <a href="https://www.php.net/manual/en/function.get-class.php" target="_blank" rel="nofollow noopener noreferrer">`get_class`</a> fonksiyonunu kullanÄ±yorduk:

```php
// PHP 7 ve Ã¶ncesi ğŸ‘

$user = new App\Models\User;

// ...

var_dump(get_class($a)); // App\Models\User

var_dump($user::class); // Fatal error: Cannot use ::class with dynamic class name
```

PHP 8 ile beraber bu mÃ¼mkÃ¼n olacak:

```php
// PHP 8 ve sonrasÄ± ğŸ‘

$user = new App\Models\User;

// ...

var_dump(get_class($a)); // App\Models\User

var_dump($user::class); // App\Models\User
```

<Collapsable title="RFC" titleSize="1rem">
    <a
        href="https://wiki.php.net/rfc/class_name_literal_on_object"
        target="_blank"
        rel="nofollow noopener noreferrer"
    >
        Allow ::class on objects
    </a>
</Collapsable>

## Expression Ä°Ã§inde throw KullanÄ±mÄ±

Eskiden expression (ifade) iÃ§inde hata fÄ±rlatamÄ±yorduk. Bir deÄŸeri koÅŸullu ifadelerle kontrol ederek onun sonucuna gÃ¶re hata fÄ±rlatÄ±p fÄ±rlatmayacaÄŸÄ±mÄ±za karar veriyorduk.

```php
// PHP 7 ve Ã¶ncesi ğŸ‘

if (empty($_POST['email'])) {
    throw new Exception('Email alanÄ± zorunlu.');
}

$email = $_POST['email'];

```

PHP 8 itibarÄ±yla throw ifadesinin artÄ±k kullanÄ±m kapsamÄ± geniÅŸledi:

```php
// PHP 8 ve sonrasÄ± ğŸ‘

$email = empty($_POST['email']) ? throw new Exception('Email alanÄ± zorunlu.') : $_POST['email'];

```

<Collapsable title="RFC" titleSize="1rem">
    <a
        href="https://wiki.php.net/rfc/throw_expression"
        target="_blank"
        rel="nofollow noopener noreferrer"
    >
        throw expression
    </a>
</Collapsable>

## Catch Ä°fadesinde Ä°steÄŸe BaÄŸlÄ± Hata DeÄŸiÅŸkeni

PHP'de `catch` ile yakaladÄ±ÄŸÄ±mÄ±z hatayÄ± kullansak da kullanmasak da deÄŸiÅŸken ile almak zorundayÄ±z:

```php
// PHP 7 ve Ã¶ncesi ğŸ‘

try {
    // Hata ihtimali olan kod(lar)
} catch (Exception $e) { // highlight-line
    echo $e->getMessage();
}
```

EÄŸer hata objesini kullanmak istemiyorsak artÄ±k deÄŸiÅŸken ile almak zorunda kalmayacaÄŸÄ±z:

```php
// PHP 8 ve sonrasÄ± ğŸ‘

try {
    // Hata ihtimali olan kod(lar)
} catch (Exception) { // highlight-line
    echo 'Hata oluÅŸtu.';
}
```

<Collapsable title="RFC" titleSize="1rem">
    <a
        href="https://wiki.php.net/rfc/non-capturing_catches"
        target="_blank"
        rel="nofollow noopener noreferrer"
    >
        non-capturing catches
    </a>
</Collapsable>

## Son Parametreden Sonra VirgÃ¼l KullanÄ±mÄ±

Bir fonksiyon/metod _Ã§aÄŸÄ±rÄ±rken_ gÃ¶nderdiÄŸimiz parametrelerin sonuna isteÄŸe baÄŸlÄ± olarak virgÃ¼l koyabiliyorduk ama _tanÄ±mlarken_ bunu yapamÄ±yorduk. PHP 8 ile bu mÃ¼mkÃ¼n olacak:

```php
function foo(
    string $foo,
    string $bar,
    string $baz,
    string $qux, // highlight-line
) {
    // ...
}
```

<Collapsable title="RFC" titleSize="1rem">
    <a
        href="https://wiki.php.net/rfc/trailing_comma_in_parameter_list"
        target="_blank"
        rel="nofollow noopener noreferrer"
    >
        Allow trailing comma in parameter list
    </a>
</Collapsable>

## Yeni SÄ±nÄ±f: `WeakMap`

WeakMap, objelerin referansÄ±nÄ± tutmamÄ±zÄ± ve kullanÄ±lmadÄ±ÄŸÄ± taktirde bellekten otomatik olarak silinmesini (garbage collected) saÄŸlayan bir sÄ±nÄ±ftÄ±r. <a href="https://www.php.net/manual/en/class.splobjectstorage.php" target="_blank" rel="nofollow noopener noreferrer">`SplObjectStorage`</a> sÄ±nÄ±fÄ±na benzer ÅŸekilde Ã§alÄ±ÅŸmaktadÄ±r ama WeakMap ile referansÄ±nÄ± tuttuÄŸumuz objeler kullanÄ±lmadÄ±ÄŸÄ± zaman bellekten silinerek olasÄ± bellek sÄ±zÄ±ntÄ±sÄ±nÄ±n Ã¶nÃ¼ne geÃ§memize yardÄ±mcÄ± olmaktadÄ±r.

Ã–ncelikle <a href="https://www.php.net/manual/en/class.splobjectstorage.php" target="_blank" rel="nofollow noopener noreferrer">`SplObjectStorage`</a> Ã¶rneÄŸine bakalÄ±m:

```php
// PHP 7 ve Ã¶ncesi ğŸ‘

class User
{
    // Ã–rnek obje
}

$map = new splObjectStorage();

$object = new User();
$map[$object] = 'User';

var_dump(count($map)); // int(1)

unset($object);

var_dump(count($map)); // int(1)
```

Bunun yerine ÅŸimdi WeakMap kullanalÄ±m:

```php
// PHP 8 ve sonrasÄ± ğŸ‘

class User
{
    // Ã–rnek obje
}

$map = new WeakMap();

$object = new User();
$map[$object] = 'User';

var_dump(count($map)); // int(1)

unset($object);

var_dump(count($map)); // int(0)
```

<Collapsable title="RFC" titleSize="1rem">
    <a
        href="https://wiki.php.net/rfc/weak_maps"
        target="_blank"
        rel="nofollow noopener noreferrer"
    >
        Weak maps
    </a>
</Collapsable>

## Yeni SÄ±nÄ±f: `PhpToken` (`token_get_all()` Alternatifi)

`tokenizer` eklentisindeki <a href="https://www.php.net/manual/en/function.token-get-all.php" target="_blank" rel="nofollow noopener noreferrer">`token_get_all`</a> fonksiyonu PHP kodumuzu parser token tÃ¼rÃ¼ne Ã§evirmektedir. Bunun obje tabanlÄ± alternatifi olarak geliÅŸtirilen `PhpToken` sÄ±nÄ±fÄ± PHP 8'e dÃ¢hil edilmiÅŸtir. Daha okunur olduÄŸu ve daha az bellek tÃ¼kettiÄŸi sÃ¶ylenmektedir.

AÃ§Ä±kÃ§asÄ± daha Ã¶nce hiÃ§ kullanmadÄ±m ama hata mesajlarÄ±nda hepimiz gÃ¶rmÃ¼ÅŸÃ¼zdÃ¼r (Ã–rneÄŸin, `T_VARIABLE`, `T_INCLUDE`, `T_THROW` vs.). PHP parser token listesine <a href="https://www.php.net/manual/en/tokens.php" target="_blank" rel="nofollow noopener noreferrer">ÅŸuradan</a> bakabilirsiniz.

<Collapsable title="RFC" titleSize="1rem">
    <a
        href="https://wiki.php.net/rfc/token_as_object"
        target="_blank"
        rel="nofollow noopener noreferrer"
    >
        Object-based token_get_all() alternative
    </a>
</Collapsable>

## Yeni Interface: `Stringable`

EÄŸer bir sÄ±nÄ±f <a href="https://www.php.net/manual/en/language.oop5.magic.php#object.tostring" target="_blank" rel="nofollow noopener noreferrer">`__toString`</a> magic metodunu uyguluyorsa otomatik olarak `Stringable` interface'ini implement etmiÅŸ olacak.

Ã–rneÄŸin, `string` tipinde parametre alan bir fonksiyon dÃ¼ÅŸÃ¼nelim. Bununla beraber <a href="https://www.php.net/manual/en/language.oop5.magic.php#object.tostring" target="_blank" rel="nofollow noopener noreferrer">`__toString`</a> metodunu uygulayarak `string` haline gelebilen sÄ±nÄ±flarÄ± da o fonksiyon iÃ§inde kullanmak istiyoruz. Bu durumda `Stringable` interface kullanarak kodumuzun tip gÃ¼venirliÄŸini (type-safe) arttÄ±rabiliriz:

```php
class Article
{
    // highlight-start
    public function __toString(): string
    {
        return 'Article body';
    }
    // highlight-end
}

function safePrint(string|Stringable $input): void // highlight-line
{
    echo htmlspecialchars((string) $input);
}

safePrint(new Article()); // Article body
```

<Collapsable title="RFC" titleSize="1rem">
    <a
        href="https://wiki.php.net/rfc/stringable"
        target="_blank"
        rel="nofollow noopener noreferrer"
    >
        Add Stringable interface
    </a>
</Collapsable>

## Yeni Fonksiyon: `str_contains`

Bir string iÃ§erisinde belirttiÄŸimiz deÄŸerin olup olmadÄ±ÄŸÄ±nÄ± eskiden <a href="https://www.php.net/manual/en/function.strpos.php" target="_blank" rel="nofollow noopener noreferrer">`strpos`</a>, <a href="https://www.php.net/manual/en/function.strstr.php" target="_blank" rel="nofollow noopener noreferrer">`strstr`</a> veya <a href="https://www.php.net/manual/en/function.preg-match.php" target="_blank" rel="nofollow noopener noreferrer">`preg_match`</a> fonksiyonlarÄ±nÄ± kullanarak tespit ederdik:

```php
// PHP 7 ve Ã¶ncesi ğŸ‘

$haystack = 'PHP is PHPantastic.';
$needle = 'PHP';

if ($needle === '' || strpos($haystack, $needle) !== false) {
    // $haystack iÃ§inde $needle geÃ§iyor.
}
```

ArtÄ±k PHP'de bu iÅŸleme Ã¶zel bir fonksiyon olacak: ğŸ‰

```php
// PHP 8 ve sonrasÄ± ğŸ‘

$haystack = 'PHP is PHPantastic.';
$needle = 'PHP';

if (str_contains($haystack, $needle)) {
    // $haystack iÃ§inde $needle geÃ§iyor.
}
```

<Collapsable title="RFC" titleSize="1rem">
    <a
        href="https://wiki.php.net/rfc/str_contains"
        target="_blank"
        rel="nofollow noopener noreferrer"
    >
        str_contains
    </a>
</Collapsable>

## Yeni Fonksiyonlar: `str_starts_with`, `str_ends_with`

BelirttiÄŸimiz bir deÄŸerin string'in sonunda veya baÅŸÄ±nda olup olmadÄ±ÄŸÄ±nÄ± kontrol etmemize olanak saÄŸlayan fonskiyonlardÄ±r.

Eskiden bu iÅŸlemler iÃ§in <a href="https://www.php.net/manual/en/function.substr.php" target="_blank" rel="nofollow noopener noreferrer">`substr`</a>, <a href="https://www.php.net/manual/en/function.strpos.php" target="_blank" rel="nofollow noopener noreferrer">`strpos`</a>/<a href="https://www.php.net/manual/en/function.strrpos.php" target="_blank" rel="nofollow noopener noreferrer">`strrpos`</a>, <a href="https://www.php.net/manual/en/function.strncmp.php" target="_blank" rel="nofollow noopener noreferrer">`strncmp`</a> veya <a href="https://www.php.net/manual/en/function.substr-compare.php" target="_blank" rel="nofollow noopener noreferrer">`substr_compare`</a> gibi fonksiyonlardan yararlanÄ±rdÄ±k.

-   `str_starts_with`: "string, belirttiÄŸimiz deÄŸer ile baÅŸlÄ±yor mu?" sorusuna cevap verir.
-   `str_ends_with`: "string, belirttiÄŸimiz deÄŸer ile bitiyor mu?" sorusuna cevap verir.

```php
// PHP 7 ve Ã¶ncesi ğŸ‘

$haystack = 'PHP is PHPantastic.';
$needle = 'PHP';

if ($needle === '' || strncmp($haystack, $needle, strlen($needle)) === 0) {
    // $haystack, $needle ile baÅŸlÄ±yor.
}

if ($needle === '' || $needle === substr($haystack, - strlen($needle))) {
    // $haystack, $needle ile bitiyor.
}
```

ArtÄ±k bunun yerine ÅŸu ÅŸekilde yazabileceÄŸiz: ğŸ¥³

```php
// PHP 8 ve sonrasÄ± ğŸ‘

$haystack = 'PHP is PHPantastic.';
$needle = 'PHP';

if (str_starts_with($haystack, $needle)) {
    // $haystack, $needle ile baÅŸlÄ±yor.
}

if (str_ends_with($haystack, $needle)) {
    // $haystack, $needle ile bitiyor.
}
```

<Collapsable title="RFC" titleSize="1rem">
    <a
        href="https://wiki.php.net/rfc/add_str_starts_with_and_ends_with_functions"
        target="_blank"
        rel="nofollow noopener noreferrer"
    >
        Add str_starts_with() and str_ends_with() functions
    </a>
</Collapsable>

## Yeni Fonksiyon: `fdiv`

PHP 8'den Ã¶nceki versiyonlarda bir sayÄ±yÄ± sÄ±fÄ±ra bÃ¶lmeye Ã§alÄ±ÅŸtÄ±ÄŸÄ±mÄ±zda _"Warning: Division by zero in..."_ ÅŸeklinde uyarÄ±, PHP 8'den itibaren ise <a href="https://www.php.net/manual/en/class.divisionbyzeroerror.php" target="_blank" rel="nofollow noopener noreferrer">`DivisionByZeroError`</a> hatasÄ± alÄ±rÄ±z. <a href="https://en.wikipedia.org/wiki/IEEE_754" target="_blank" rel="nofollow noopener noreferrer">IEEE 754</a> standartÄ±na uygun olarak geliÅŸtirilen `fdiv` fonksiyonu ile bir sayÄ±yÄ± sÄ±fÄ±ra bÃ¶ldÃ¼ÄŸÃ¼mÃ¼zde hata/uyarÄ± vermek yerine `INF`, `-INF` veya `NAN` dÃ¶ndÃ¼recek.

```php
var_dump(fdiv(1, 0)); // float(INF)
var_dump(fdiv(-1, 0)); // float(-INF)
var_dump(fdiv(0, 0)); // float(NAN)
```

<Collapsable title="PR" titleSize="1rem">
    <a
        href="https://github.com/php/php-src/pull/4769"
        target="_blank"
        rel="nofollow noopener noreferrer"
    >
        Add fdiv() function
    </a>
</Collapsable>

## Yeni Fonksiyon: `get_debug_type`

Bir deÄŸiÅŸkenin tipini Ã¶ÄŸrenmek iÃ§in <a href="https://www.php.net/manual/en/function.gettype.php" target="_blank" rel="nofollow noopener noreferrer">`gettype`</a> fonksiyonunu kullanÄ±yorduk. Ama deÄŸiÅŸken bir obje/sÄ±nÄ±f veya fonksiyon ise <a href="https://www.php.net/manual/en/function.gettype.php" target="_blank" rel="nofollow noopener noreferrer">`gettype`</a> pek de anlamlÄ± sonuÃ§ vermemektedir.

Ã–rneÄŸin, uygulamamÄ±zda herhangi bir sÄ±nÄ±fÄ±n <a href="https://www.php.net/manual/en/function.gettype.php" target="_blank" rel="nofollow noopener noreferrer">`gettype`</a> ile tipini almak istediÄŸimizde `object` dÃ¶ndÃ¼recektir. SÄ±nÄ±f ismini Ã¶ÄŸrenmek istediÄŸimizde ise <a href="https://www.php.net/manual/en/function.get-class.php" target="_blank" rel="nofollow noopener noreferrer">`get_class`</a> fonksiyonunu kullanmamÄ±z gerekecektir. DolayÄ±sÄ±yla ÅŸuna benzer bir sÃ¼reÃ§ten geÃ§miÅŸ olacaÄŸÄ±z:

```php
// PHP 7 ve Ã¶ncesi ğŸ‘

$type = is_object($foo) ? get_class($foo) : gettype($foo);
```

`get_debug_type` fonksiyonu bize daha aÃ§Ä±klayÄ±cÄ± sonuÃ§ verecektir:

```php
// PHP 8 ve sonrasÄ± ğŸ‘

$type = get_debug_type($foo);
```

AÅŸaÄŸÄ±daki tablo incelendiÄŸinde arasÄ±ndaki farklar daha net anlaÅŸÄ±lacaktÄ±r.

| Tip          | Ã–rnek DeÄŸer                | `gettype`  | `get_debug_type`    |
| ------------ | -------------------------- | ---------- | ------------------- |
| Integer      | `123`                      | `integer`  | `int`               |
| Float        | `3.14`                     | `double`   | `float`             |
| Boolean      | `true`                     | `boolean`  | `bool`              |
| Boolean      | `false`                    | `boolean`  | `bool`              |
| String       | `'Foo'`                    | `string`   | `string`            |
| Array        | `[1, 2, 3]`                | `array`    | `array`             |
| Null         | `null`                     | `NULL`     | `null`              |
| SÄ±nÄ±f        | `new Foo\Bar()`            | `object`   | `Foo\Bar`           |
| SÄ±nÄ±f        | `new DateTime()`           | `object`   | `DateTime`          |
| Anonim SÄ±nÄ±f | `new class {}`             | `object`   | `class@anonymous`   |
| Anonim SÄ±nÄ±f | `new class extends Foo {}` | `object`   | `Foo@anonymous`     |
| Closure      | `function() {}`            | `object`   | `Closure`           |
| Stream       | `tmpfile()`                | `resource` | `resource (stream)` |
| Curl         | `curl_init()`              | `resource` | `resource (curl)`   |
| Xml          | `xml_parser_create()`      | `resource` | `resource (xml)`    |

<Collapsable title="RFC" titleSize="1rem">
    <a
        href="https://wiki.php.net/rfc/get_debug_type"
        target="_blank"
        rel="nofollow noopener noreferrer"
    >
        get_debug_type
    </a>
</Collapsable>

## Yeni Fonksiyon: `preg_last_error_msg`

BildiÄŸiniz gibi, PHP'de <a href="https://www.php.net/manual/en/ref.pcre.php" target="_blank" rel="nofollow noopener noreferrer">`preg_` ile baÅŸlayan fonksiyonlarÄ±</a> kullanarak regex iÅŸlemleri yapabiliyoruz. Ama bu fonksiyonlar, iÅŸlem sÄ±rasÄ±nda hata oluÅŸtuÄŸunda herhangi bir hata mesajÄ± dÃ¶ndÃ¼rmemektedirler. Sadece <a href="https://www.php.net/manual/en/ref.pcre.php" target="_blank" rel="nofollow noopener noreferrer">`preg_last_error`</a> fonksiyonunu kullanarak Ã§Ä±kan hatanÄ±n kodunu alabiliyorduk. Tam olarak Ã§Ä±kan hatayÄ± anlamak iÃ§in ÅŸuna benzer bir yÃ¶ntem izliyorduk:

```php
// PHP 7 ve Ã¶ncesi ğŸ‘

preg_match('/(?:\D+|<\d+>)*[!?]/', 'foobar foobar foobar');

$message = '';

switch (preg_last_error()) {
    case PREG_NO_ERROR: // 0
        $message = 'No error';
        break;
    case PREG_INTERNAL_ERROR: // 1
        $message = 'Internal error';
        break;
    case PREG_BACKTRACK_LIMIT_ERROR: // 2
        $message = 'Backtrack limit exhausted';
        break;
    case PREG_RECURSION_LIMIT_ERROR: // 3
        $message = 'Recursion limit exhausted';
        break;
    case PREG_BAD_UTF8_ERROR: // 4
        $message = 'Malformed UTF-8 characters, possibly incorrectly encoded';
        break;
    case PREG_BAD_UTF8_OFFSET_ERROR: // 5
        $message = 'The offset did not correspond to the beginning of a valid UTF-8 code point';
        break;
    case PREG_JIT_STACKLIMIT_ERROR: // 6
        $message = 'JIT stack limit exhausted';
        break;
    default:
        $message = 'Unknown error';
}

echo $message; // Backtrack limit exhausted
```

Yeni gelen `preg_last_error_msg` fonksiyonu sayesinde artÄ±k oluÅŸan hatayÄ± bu ÅŸekilde tespit etmemize gerek kalmayacak:

```php
// PHP 8 ve sonrasÄ± ğŸ‘

preg_match('/(?:\D+|<\d+>)*[!?]/', 'foobar foobar foobar');

echo preg_last_error_msg(); // Backtrack limit exhausted
```

<Info>

Hata oluÅŸmadÄ±ÄŸÄ± durumlarda bu fonksiyon **"No error"** mesajÄ± dÃ¶ndÃ¼rmektedir.

</Info>

<Collapsable title="PR" titleSize="1rem">
    <a
        href="https://github.com/php/php-src/pull/5185"
        target="_blank"
        rel="nofollow noopener noreferrer"
    >
        Add preg_last_error_msg() function
    </a>
</Collapsable>

## Yeni Fonksiyon: `get_resource_id`

PHP'de veritabanÄ±/FTP/LDAP baÄŸlantÄ±sÄ± veya dosya aÃ§ma/okuma/yazma gibi harici kaynaklarÄ± (resources) iÃ§inde barÄ±ndÄ±ran deÄŸiÅŸkenlere otomatik olarak `int` tipinde ID atanmaktadÄ±r. Ve bu resource ID'sini ÅŸu ÅŸekilde Ã¶ÄŸreniyorduk:

```php
// PHP 7 ve Ã¶ncesi ğŸ‘

$resourceId = (int) $resource;
```

ArtÄ±k resource deÄŸiÅŸkenini `int` tipine Ã§evirmek yerine `get_resource_id` fonksiyonunu kullanabiliriz:

```php
// PHP 8 ve sonrasÄ± ğŸ‘

$resourceId = get_resource_id($resource);
```

<Collapsable title="PR" titleSize="1rem">
    <a
        href="https://github.com/php/php-src/pull/5427"
        target="_blank"
        rel="nofollow noopener noreferrer"
    >
        get_debug_type
    </a>
</Collapsable>

## Fonksiyon Parametrelerindeki Tip HatasÄ± GeliÅŸtirmeleri

Kendi tanÄ±mladÄ±ÄŸÄ±mÄ±z fonksiyonlara yanlÄ±ÅŸ tipte bir parametre gÃ¶nderdiÄŸimizde <a href="https://www.php.net/manual/en/class.typeerror.php" target="_blank" rel="nofollow noopener noreferrer">`TypeError`</a> hatasÄ±nÄ± almaktayÄ±z. Ama PHP iÃ§indeki Ã¶n tanÄ±mlÄ± fonksiyonlar hata yerine uyarÄ± vermekte, `null` veya `false` dÃ¶ndÃ¼rmektedir. Ã–rneÄŸin:

```php
// PHP 7 ve Ã¶ncesi ğŸ‘

var_dump(strlen([])); // NULL
// Warning: strlen() expects parameter 1 to be string, array given in...
```

Bu davranÄ±ÅŸ `strict_types` aktif olmadÄ±ÄŸÄ± durumlarda geÃ§erlidir. KullanÄ±cÄ± tanÄ±mlÄ± fonksiyonlar ile tutarlÄ±lÄ±ÄŸÄ± saÄŸlamak adÄ±na PHP 8 ile beraber Ã¶n tanÄ±mlÄ± fonskiyonlara
(`strict_types` farketmeksizin) yanlÄ±ÅŸ tipte parametre gÃ¶nderildiÄŸinde <a href="https://www.php.net/manual/en/class.typeerror.php" target="_blank" rel="nofollow noopener noreferrer">`TypeError`</a> hatasÄ± fÄ±rlatÄ±lacaktÄ±r.

```php
// PHP 8 ve sonrasÄ± ğŸ‘

var_dump(strlen([]));
// Fatal error: Uncaught TypeError: strlen(): Argument #1 ($str) must be of type string, array given in...
```

<Collapsable title="RFC" titleSize="1rem">
    <a
        href="https://wiki.php.net/rfc/consistent_type_errors"
        target="_blank"
        rel="nofollow noopener noreferrer"
    >
        Consistent type errors for internal functions
    </a>
</Collapsable>

## SayÄ± ve String KarÅŸÄ±laÅŸtÄ±rma GeliÅŸtirmeleri

PHP'de sayÄ±larla string'leri `==`, `!=` veya diÄŸer strict olmayan yÃ¶ntemleri (`>`, `>=`, `<`, `<=`, `<=>`) kullanarak karÅŸÄ±laÅŸtÄ±rma yaptÄ±ÄŸÄ±mÄ±zda bazen beklenmeyen sonuÃ§larla karÅŸÄ±laÅŸabiliyoruz. Ã‡Ã¼nkÃ¼ bu durumlarda PHP otomatik olarak tip dÃ¶nÃ¼ÅŸtÃ¼rmesini yapmaktadÄ±r. Daha iyi kavramak iÃ§in aÅŸaÄŸÄ±daki Ã¶rneÄŸi inceleyelim:

```php
// PHP 7 ve Ã¶ncesi ğŸ‘

var_dump(0 == ''); // true
var_dump(0 == 'abc'); // true
var_dump(12 == '12abc'); // true
var_dump(0 == 'abc12'); // true

var_dump(in_array(0, ['foo', 'bar', 'baz'])); // true ğŸ˜±
```

PHP 8'den itibaren strict olmayan karÅŸÄ±laÅŸtÄ±rma yÃ¶ntemleri kullanÄ±ldÄ±ÄŸÄ±nda eÄŸer string tam olarak sayÄ±sal deÄŸere sahipse sayÄ±sal karÅŸÄ±laÅŸtÄ±rma, deÄŸilse de sayÄ± olan taraf otomatik string'e Ã§evirilerek karÅŸÄ±laÅŸtÄ±rma yapÄ±lacak. DolayÄ±sÄ±yla, Ã¼stteki Ã¶rnek aÅŸaÄŸÄ±daki gibi Ã§Ä±ktÄ± Ã¼retecektir:

```php
// PHP 8 ve sonrasÄ± ğŸ‘

var_dump(0 == ''); // false
var_dump(0 == 'abc'); // false
var_dump(12 == '12abc'); // false
var_dump(0 == 'abc12'); // false

var_dump(in_array(0, ['foo', 'bar', 'baz'])); // false ğŸ¤©
```

<Collapsable title="RFC" titleSize="1rem">
    <a
        href="https://wiki.php.net/rfc/string_to_number_comparison"
        target="_blank"
        rel="nofollow noopener noreferrer"
    >
        Saner string to number comparisons
    </a>
</Collapsable>

## Private Metodlarda Inheritance KurallarÄ±

PHP'de bir sÄ±nÄ±f iÃ§indeki public, protected ve private metodlarÄ±n hepsi iÃ§in aynÄ± inheritance kurallarÄ± geÃ§erlidir. AslÄ±nda bu private metodlar iÃ§in pek de mantÄ±klÄ± bir davranÄ±ÅŸ deÄŸil Ã§Ã¼nkÃ¼ private metodlar sadece tanÄ±mlandÄ±ÄŸÄ± sÄ±nÄ±f iÃ§inde eriÅŸilebilir/kullanÄ±labilir. Ã–rneÄŸin, bir sÄ±nÄ±f iÃ§inde `final private` olarak bir metod tanÄ±mlamak mantÄ±ksÄ±z Ã§Ã¼nkÃ¼ alt sÄ±nÄ±ftan zaten eriÅŸilemeyecek ve dolayÄ±sÄ±yla herhangi bir override sÃ¶z konusu deÄŸil.

```php
// PHP 7 ve Ã¶ncesi ğŸ‘

class Foo
{ 
    final private function test() { 
        // ...
    } 
} 
 
class Bar extends Foo
{ 
    private function test() { 
        // ...
    } 
}

// Fatal error: Cannot override final method Foo::test() in...
```

PHP 8'de private metodlar iÃ§in inheritance kurallarÄ± kaldÄ±rÄ±ldÄ± ve `final private` olarak tanÄ±mlanan metodlar iÃ§in hata yerine sadece uyarÄ± verilecek:

```php
// PHP 8 ve sonrasÄ± ğŸ‘

class Foo
{ 
    final private function test() { 
        // ...
    } 
} 
 
class Bar extends Foo
{ 
    private function test() { 
        // ...
    } 
}

// Warning: Private methods cannot be final as they are never overridden by other classes in...
```

<Collapsable title="RFC" titleSize="1rem">
    <a
        href="https://wiki.php.net/rfc/inheritance_private_methods"
        target="_blank"
        rel="nofollow noopener noreferrer"
    >
        Remove inappropriate inheritance signature checks on private methods
    </a>
</Collapsable>

## `substr`, `iconv_substr`, `grapheme_substr` FonksiyonlarÄ±nÄ±n DÃ¶nÃ¼ÅŸ DeÄŸerleri

PHP'de <a href="https://www.php.net/manual/en/function.substr.php" target="_blank" rel="nofollow noopener noreferrer">`substr`</a>, <a href="https://www.php.net/manual/en/function.iconv-substr.php" target="_blank" rel="nofollow noopener noreferrer">`iconv_substr`</a> ve <a href="https://www.php.net/manual/en/function.grapheme-substr.php" target="_blank" rel="nofollow noopener noreferrer">`grapheme_substr`</a> fonksiyonlarÄ± bir string deÄŸerinin belirli parÃ§asÄ±nÄ± almamÄ±zÄ± saÄŸlamaktadÄ±r. Ä°stediÄŸimiz parÃ§anÄ±n bulunamadÄ±ÄŸÄ± durumlarda `false` dÃ¶ndÃ¼rmektedir:

```php
// PHP 7 ve Ã¶ncesi ğŸ‘

var_dump(substr('abc', 12)); // false
var_dump(iconv_substr('abc', 12)); // false
var_dump(grapheme_substr('abc', 12)); // false
```

String iÅŸlemleri yapan bu fonksiyonlarÄ±n `boolean` deÄŸer dÃ¶ndÃ¼rmesi pek de mantÄ±klÄ± deÄŸil. Bundan sonra benzeri durumlarda boÅŸ string (`''`) dÃ¶ndÃ¼recek:

```php
// PHP 8 ve sonrasÄ± ğŸ‘

var_dump(substr('abc', 12)); // ""
var_dump(iconv_substr('abc', 12)); // ""
var_dump(grapheme_substr('abc', 12)); // ""
```

<Collapsable title="PR" titleSize="1rem">
    <a
        href="https://github.com/php/php-src/pull/6182"
        target="_blank"
        rel="nofollow noopener noreferrer"
    >
        Normalize substr() behavior
    </a>
</Collapsable>